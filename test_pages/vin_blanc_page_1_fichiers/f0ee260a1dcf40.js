function CookieStorage(){this.name="CookieStorage",this.decoder=decodeURIComponent,this.encoder=encodeURIComponent}function Cortex3PartyCookieStorage(){this.name="Cortex3PartyCookieStorage",this._apiBaseURL="offer.slgnt.eu",this._timeoutTime=1e3,this._iframe=null,this._originalHandler=null,this._running=!1,this._createIframe()}function IDBStorage(){this.name="IndexDBStorage",this._database=void 0,this._databaseName="smc_cortex",this._objectStore="cortex",this._dbVersion=1,this._indexDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB;var t=this._indexDB.open(this._databaseName,this._dbVersion);t.onsuccess=function(t){this._database=t.target.result}.bind(this),t.onerror=function(t){console.warn("Error creating/accessing IndexedDB database")},t.onupgradeneeded=function(t){this._database=t.target.result,this._database.createObjectStore(this._objectStore).createIndex("by_key","key",{unique:!0})}.bind(this)}function LocalStorage(){this.name="LocalStorage"}function PBS(){this._lastLoadFrom=null,this._availableStorageOptions=[],!0===CookieStorage.isSupported()&&this._availableStorageOptions.push(new CookieStorage),!0===LocalStorage.isSupported()&&this._availableStorageOptions.push(new LocalStorage),!0===IDBStorage.isSupported()&&this._availableStorageOptions.push(new IDBStorage),!0===SessionStorage.isSupported()&&this._availableStorageOptions.push(new SessionStorage),!0===Cortex3PartyCookieStorage.isSupported()&&this._availableStorageOptions.push(new Cortex3PartyCookieStorage)}function SessionStorage(){this.name="SessionStorage"}function TestAsyncStorage(){this.name="TestAsyncStorage"}CookieStorage.prototype.set=function(t,e,n){var o=this._getTimestamp(31557600),i=e;if(i&&"function"==typeof this.encoder)try{i=this.encoder(i)}catch(t){}document.cookie=t+"="+i+";expires="+o+";path=/;samesite=Lax",n(null,!0)},CookieStorage.prototype.get=function(t,e){var n,o=this._getCookies();for(n in o)if(o[n].key===t){var i=o[n].value;if(i&&"function"==typeof this.decoder)try{i=this.decoder(i)}catch(t){}return void e(null,i)}e(null,null)},CookieStorage.prototype.remove=function(t,e){var n,o=this._getCookies();for(n in o)if(o[n].key===t)return document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",void e(null,!0);e(null,!1)},CookieStorage.prototype._getCookies=function(){var e=[];return document.cookie.split(";").forEach(function(t){t=t.split("=");2===t.length&&e.push({key:t[0].trim(),value:t[1].trim()})}),e},CookieStorage.prototype._getTimestamp=function(t){var e=new Date,t=e.getTime()+1e3*t;return e.setTime(t),e.toUTCString()},CookieStorage.isSupported=function(){return"cookie"in document},Cortex3PartyCookieStorage.prototype.set=function(t,e,n){n("Not supported",!1)},Cortex3PartyCookieStorage.prototype.get=function(n,o){var i;void 0===document||this._isAlreadyRunning?o(null,null):(null!==window.onmessage&&(this._originalHandler=window.onmessage),this._isAlreadyRunning=!0,document.body.appendChild(this._iframe),i=setTimeout(function(){this._cleanUp(),o("timeout",null)}.bind(this),this._timeoutTime),window.onmessage=function(t){t.origin==="https://"+this._apiBaseURL&&-1<t.data.indexOf(n+"=")&&(this._cleanUp(),t.data.split(";").forEach(function(t){if(-1<t.indexOf(n+"=")){t=t.trim().split("=");if(t[1]){clearTimeout(i);var e="null"===t[1]?null:t[1];try{e=decodeURIComponent(e)}catch(t){}o(null,e)}}})),"function"==typeof this._originalHandler&&this._originalHandler.apply(window,arguments)}.bind(this))},Cortex3PartyCookieStorage.prototype.remove=function(t,e){e("Not supported",!0)},Cortex3PartyCookieStorage.prototype._cleanUp=function(){this.iframe&&"function"==typeof this.iframe.remove&&this.iframe.remove(),null!==this._originalHandler&&"function"!=typeof this._originalHandler||(window.onmessage=this._originalHandler),this._isAlreadyRunning=!1},Cortex3PartyCookieStorage.prototype._createIframe=function(){this._iframe=document.createElement("iframe"),this._iframe.width=100,this._iframe.height=100,this._iframe.style.display="none",this._iframe.src="https://"+this._apiBaseURL+"/static/cookie.html"},Cortex3PartyCookieStorage.prototype._handlerFunction=function(t){console.warn(t),t.origin===this._apiBaseURL&&t.data.indexOf(key+"=")&&(this._cleanUp(),t.data.split(";").forEach(function(t){!t.indexOf(key+"=")||(t=t.trim().split("="))[1]&&(clearTimeout(timeout),cb(null,t[1]))})),"function"==typeof this._originalHandler&&this._originalHandler.apply(window,arguments)},Cortex3PartyCookieStorage.isSupported=function(){return"cookie"in document&&"onmessage"in window},IDBStorage.prototype.set=function(t,e,n){try{this._database?(this._database.transaction(this._objectStore,"readwrite").objectStore(this._objectStore).put(e,t),n(null,!0)):n(1,null)}catch(t){n(t,!1)}},IDBStorage.prototype.get=function(t,e){try{var n;this._database?((n=this._database.transaction(this._objectStore,"readwrite").objectStore(this._objectStore).get(t)).onsuccess=function(t){e(null,t.target.result)},n.onerror=function(t){e(t,null)}):e(1,null)}catch(t){e(t,null)}},IDBStorage.prototype.remove=function(e,n){try{var o=this._database.transaction(this._objectStore,"readwrite"),t=o.objectStore(this._objectStore).get(e);t.onsuccess=function(t){void 0!==t.target.result?((t=o.objectStore(this._objectStore).delete(e)).onsuccess=function(){n(null,!0)},t.onerror=function(t){n(t,null)}):n(null,!1)}.bind(this),t.onerror=function(t){n(t,null)}}catch(t){n(t,null)}},IDBStorage.isSupported=function(){return!!(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB)},LocalStorage.prototype.set=function(t,e,n){window.localStorage.setItem(t,e),n(null,!0)},LocalStorage.prototype.get=function(t,e){e(null,window.localStorage.getItem(t))},LocalStorage.prototype.remove=function(t,e){null===window.localStorage.getItem(t)?e(null,!1):(window.localStorage.removeItem(t),e(null,!0))},LocalStorage.isSupported=function(){try{return!!window.localStorage}catch(t){return!1}},PBS.prototype.set=function(t,e){for(var n=0;n<this._availableStorageOptions.length;n++)this._availableStorageOptions[n]&&"function"==typeof this._availableStorageOptions[n].set&&this._availableStorageOptions[n].set(t,e,function(t,e){})},PBS.prototype.get=function(t,e){!function n(o,i,r,a){i>=r.length?a(null,null):r[i].get(t,function(t,e){null!==t||null==e?n(o,i+1,r,a):(o._lastLoadFrom=r[i].name,a(null,e))})}(this,0,this._availableStorageOptions,e)},PBS.prototype.getAndUpdate=function(n,o){this.get(n,function(t,e){null===t&&null!=e&&this.set(n,e),o(t,e)}.bind(this))},PBS.prototype.remove=function(t){for(var e=0;e<this._availableStorageOptions.length;e++)this._availableStorageOptions[e]&&"function"==typeof this._availableStorageOptions[e].remove&&this._availableStorageOptions[e].remove(t,function(){})},PBS.prototype.getAvailableStorageOptions=function(){return this._availableStorageOptions},PBS.prototype.getLastLoadedFrom=function(){return this._lastLoadFrom},SessionStorage.prototype.set=function(t,e,n){window.sessionStorage.setItem(t,e),n(null,!0)},SessionStorage.prototype.get=function(t,e){e(null,window.sessionStorage.getItem(t))},SessionStorage.prototype.remove=function(t,e){null===window.sessionStorage.getItem(t)?e(null,!1):(window.sessionStorage.removeItem(t),e(null,!0))},SessionStorage.isSupported=function(){try{return!!window.sessionStorage}catch(t){return!1}},TestAsyncStorage.prototype.set=function(t,e,n){},TestAsyncStorage.prototype.get=function(t,e){setTimeout(function(){e(null,"Found after one second!")},1e3)},TestAsyncStorage.prototype.remove=function(t,e){},TestAsyncStorage.isSupported=function(){return!0},"object"==typeof _thq&&null!==_thq||(_thq=[]),"undefined"!=typeof Cortex&&null!==Cortex||(Cortex=function(){"use strict";var d,U,P,c,f,O,R,D,q,t,j="thRecommendations",L="thWidget_",M="thSmartMenu",F="thDongle",H="th_u",z=document,J=window,o=(J.navigator.userAgent,new PBS),W=!1,u=null,V=[],$=null,X=null,G=!1,Y=!1,K=["click","mouseup","mousedown"],Q=["submit","button"],Z=["input","button"],tt=[],et=!1,nt="lr",ot=300,it=0,rt="success",at=!1;"console"in window||((t=window.console={}).log=t.warn=t.error=t.debug=function(){});var st={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,o,i,r,a,s="",l=0;for(t=st._utf8_encode(t);l<t.length;)o=(a=t.charCodeAt(l++))>>2,i=(3&a)<<4|(e=t.charCodeAt(l++))>>4,r=(15&e)<<2|(n=t.charCodeAt(l++))>>6,a=63&n,isNaN(e)?r=a=64:isNaN(n)&&(a=64),s=s+st._keyStr.charAt(o)+st._keyStr.charAt(i)+st._keyStr.charAt(r)+st._keyStr.charAt(a);return s},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):(127<o&&o<2048?e+=String.fromCharCode(o>>6|192):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128)),e+=String.fromCharCode(63&o|128))}return e}},lt={bind:function(t,e,n,o,i){lt._replyBind(t,e,n,o,i)},_replyBind:function(t,e,n,o,i){lt.hash._bind();var r=lt.data("listeners.postmessage");r||(r={},lt.data("listeners.postmessage",r));var a=r[t];a||(a=[],r[t]=a),a.push({fn:e,callback:i,origin:n||null})},data:function(t,e){return void 0===e?lt._data[t]:lt._data[t]=e},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),hash:{_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){lt.data("polling.postmessage")||(setInterval(function(){var t=""+window.location.hash,e=lt.hash._regex.exec(t);e&&(e=e[1],lt.hash._last!==e&&(lt.hash._last=e,lt.hash._dispatch(t.substring(lt.hash._regex_len))))},400),lt.data("polling.postmessage",1))},_dispatch:function(t){if(t){try{if(!("postmessage"===(t=JSON.parse(decodeURIComponent(t)))["x-requested-with"]&&t.source&&null!==t.source.name&&t.source.url&&t.postmessage))return}catch(t){return}for(var e=t.postmessage,n="parent"===t.source.name?window.parent:window.frames[t.source.name],o=(lt.data("listeners.postmessage")||{})[e.type]||[],i=/https?\:\/\/[^\/]*/.exec(t.source.url)[0],r=0,a=o.length;r<a;r++){var s,l=o[r];l.origin&&("*"===l.origin||i===l.origin?((s={}).data=e,s.origin=i,s.source=n,l.fn(s),window.location.hash=""):console.warn("postmessage message origin mismatch",i,l.origin))}}},_url:function(t){return(""+t).replace(/#.*$/,"")}}},ut=function(e){var n="";return Object.keys(e).forEach(function(t){e.hasOwnProperty(t)&&"string"==typeof e[t]&&(n+=0===n.length?"":"&",n+=t+"="+e[t])}),n};function dt(t){try{return 0<t.length&&"0"in Object(t)}catch(t){return}}function ct(t,e){var n;try{n=JSON.parse(t)}catch(t){n=e||[]}return n}function pt(t){return"string"==typeof t||t instanceof String}function gt(){for(var t,e="",n=0;n<arguments.length;n+=1)pt(t=arguments[n])&&(e+=t.replace(/^\//,"").replace(/\/$/,"")),n!==arguments.length-1&&(e+="/");return e}function e(){if(!at)for(var t,e,n=0;n<arguments.length;n+=1)t=(e=arguments[n]).shift(),void 0!==d[t]&&(pt(t)?d[t]:t).apply(d,e)}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null===this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0==i)return-1;e=+e||0;if(Math.abs(e)===1/0&&(e=0),i<=e)return-1;for(n=Math.max(0<=e?e:i-Math.abs(e),0);n<i;){if(n in o&&o[n]===t)return n;n++}return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var n,ft=function(t,e,n){return(ft=z.getElementsByClassName?function(t,e,n){for(var o,i=(n=n||z).getElementsByClassName(t),r=e?new RegExp("\\b"+e+"\\b","i"):null,a=[],s=0,l=i.length;s<l;s+=1)o=i[s],r&&!r.test(o.nodeName)||a.push(o);return a}:z.evaluate?function(t,e,n){e=e||"*",n=n||z;for(var o,i,r=t.split(" "),a="",t="http://www.w3.org/1999/xhtml",s=z.documentElement.namespaceURI===t?t:null,l=[],u=0,d=r.length;u<d;u+=1)a+='[contains(concat(" ", @class, " "), " '+r[u]+' ")]';try{o=z.evaluate(".//"+e+a,n,s,0,null)}catch(t){o=z.evaluate(".//"+e+a,n,null,0,null)}for(;i=o.iterateNext();)l.push(i);return l}:function(t,e,n){e=e||"*",n=n||z;for(var o,i,r=t.split(" "),a=[],s="*"===e&&n.all?n.all:n.getElementsByTagName(e),l=[],u=0,d=r.length;u<d;u+=1)a.push(new RegExp("(^|\\s)"+r[u]+"(\\s|$)"));for(var c=0,p=s.length;c<p;c+=1){o=s[c],i=!1;for(var g=0,f=a.length;g<f&&(i=a[g].test(o.className));g+=1);i&&l.push(o)}return l})(t,e,n)};function ht(n){null!=u?n(null,u):(W?o.get:o.getAndUpdate).bind(o)(H,function(t,e){null===t&&null!=e?n(null,u=e):n("user id not set",null)})}function mt(i,r,a,e,s){function l(){try{var t=JSON.parse(arguments[1]);t&&t.meta&&t.meta.userId&&(W?(o.remove(H),u=t.meta.userId,window.sessionStorage&&window.sessionStorage.setItem(H,t.meta.userId)):(u=t.meta.userId,o.set(H,t.meta.userId)))}catch(t){}e.apply(null,arguments)}ht(function(t,e){var n=null,o="";null!=e&&(o="&"+H+"="+encodeURIComponent(e)),"POST"===s&&"object"==typeof a&&null!==a&&(n=JSON.parse(JSON.stringify(a)),a=""),a+=a?o:o.substring(1),function(t,e,n,o,i,r){var a,s="";void 0===i&&(i="GET");try{a=J.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),s=null!==t?gt(P,"api",U,e,t):gt(P,"api",U,e),"string"==typeof n&&""!==n&&(s+="?"+n),!0===W&&(s+="string"==typeof n&&""!==n?"&anon=1":"?anon=1"),a.open(i,s,!0),a.onreadystatechange=function(){4===this.readyState&&(200===this.status||204===this.status||1223===this.status?a.response?o(!0,a.response):a.responseText?o(!0,a.responseText):o(!0,rt):a.response?o(!1,"Not tracked (rsp: "+a.response+")"):a.responseText?o(!0,"Not tracked (rsp: "+a.responseText+")"):o(!1,"Not tracked"))},"POST"===i?"object"==typeof r&&null!==r&&(a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.withCredentials=!0,a.send(JSON.stringify(r))):(a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),a.withCredentials=!0,a.send(s))}catch(e){"GET"===i?function(t,e){var n=new Image(1,1);n.onload=function(){"function"==typeof e&&e()},n.onerror=function(t){"function"==typeof e&&e()},n.src=t}(s,function(t){o(e,"Image loaded")}):o(e,"POST failed")}}(i,r,a,l,s,n)})}function yt(t,e,n,o){var i;"string"==typeof t&&"string"==typeof e?i={item_pid:t,action:e}:dt(t)&&(i={item_pids:t,action:e}),void 0!==i?mt(null,"v1/interactionf",i,o,"POST"):o("Bad item ID or action",null)}d=new function(){var i={};function S(){var t=J.location.href;return t.replace("#.*",""),t}function n(){return z.location.protocol}function _(){return encodeURIComponent(st.encode(S()))}function I(){var t,e=null;return null!==$&&$.id&&$.parameterName&&((t=z.getElementById($.id))&&(e=(e=t.getAttribute($.parameterName))&&encodeURIComponent(e))),e}function h(t){var e={},n=t.getAttribute("class");return null!==n&&"string"==typeof n&&""!==n&&(e.class=n.trim()),null!==(n=t.getAttribute("id"))&&"string"==typeof n&&""!==n&&(e.id=n.trim()),null!==(n=t.getAttribute("name"))&&"string"==typeof n&&""!==n&&(e.name=n.trim()),null!==(n=t.value)&&"string"==typeof n&&""!==n&&(e.value=n.trim()),e}function m(t){return"INPUT"===t||"BUTTON"===t||"A"===t||"AREA"===t}function o(t){var e,n,o=(t=t||J.event).which||t.button,i={target:e=t.target||t.srcElement,currentTarget:n=t.currentTarget};"mousedown"===t.type?c=1!==o&&2!==o||!e&&!n?f=null:(f=void 0!==n?n:e,o):"mouseup"===t.type?(o!==c||e!==f&&n!==f||(R=void 0!==n?(a(n,i),n):(a(e,i),e),O=o),c=f=null):"click"===t.type&&(e||n)&&(O!==o||R!==e&&R!==n)&&(R=void 0!==n?(a(n,i),n):(a(e,i),e),O=o)}function e(){for(var t=E(),e=0;e<t.length;e+=1)"object"==typeof t[e]&&null!==t[e]&&t[e].iframe&&(t[e].parent.style.width="100%",t[e].iframe.width="100%")}function r(t){for(var e=0;e<K.length;e++)x(t,K[e],o)}function t(){return!G&&(G=!0,Y||(Y=!0,function(){var t,e=z.links;if(e)for(t=0;t<e.length;t++)r(e[t])}(),function(){for(var t,e,n,o=0;o<Z.length;o++)if(n=z.getElementsByTagName(Z[o]))for(t=0;t<n.length;t++)pt(e=n[t].type)&&(e=e.toLowerCase(),0<=Q.indexOf(e)&&r(n[t]))}(),0<(t=z.getElementsByTagName("body")).length&&r(t[0]),x(J,"resize",e)),!0);var t}function p(t){var o,i,r=[];return function t(e){for(var n=0;n<e.childNodes.length;n++)t(o=e.childNodes[n]),o.tagName&&"INPUT"===o.tagName.toUpperCase()&&"PASSWORD"!==o.getAttribute("type").toUpperCase().trim()&&(i=h(o),r.push(i))}(t),0===r.length&&(r=null),r}function y(t){for(var e,n={},o=!0,i=0;i<t.attributes.length;i+=1)(e=t.attributes[i]).specified&&e.name&&e.value&&(n[e.name]=e.value,o=!1);return o&&(n=null),n}function x(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),1):t.attachEvent?t.attachEvent("on"+e,n):void(t["on"+e]=n)}function a(n,t){var e,o,i="",r=(_(),n.parentNode),a="div";if(Q.indexOf(n.type)<0&&n){for(;null!=r;){if("A"===(o=n.tagName.toUpperCase())||"AREA"===o||"BUTTON"===o){a="button";break}r=(n=r).parentNode}n===z&&(a="div",n=t.target)}else for(;null!=r;){if(r.tagName&&"FORM"===(o=r.tagName.toUpperCase())){a="form",e=r;break}r=r.parentNode}var s,l,u,d,c={};n!==z?(c=function(t,e){for(var n,o,i,r,a=t,s="",l="",u="",d=!1,c=0,p="class";null!=a&&a!==e&&c<10;)s+=(n=h(a))[p]?" "+n[p]:"",l+=n.id?" "+n.id:"",u+=n.name?" "+n.name:"",a.tagName&&m(a.tagName)&&(d=!0),a=a.parentNode,c+=1;if(r={},""!==s&&(r[p]=s.trim()),""!==l&&(r.id=l.trim()),""!==u&&(r.name=u.trim()),t){var g,f=y(t);for(g in f)f.hasOwnProperty(g)&&"string"==typeof f[g]&&""!==f[g]&&("string"==typeof r[g]&&r[g].indexOf(f[g])<0?r[g]+=" "+f[g].trim():void 0===r[g]&&(r[g]=f[g].trim()))}return e.tagName&&(i=e.tagName.toUpperCase()),t.tagName&&(o=t.tagName.toUpperCase()),("BODY"===i&&m(o)||d)&&(r.doNotSave=!0),r}(n,t.currentTarget)).doNotSave?g("trackEvents",!0,"Duplicate Event, not saving."):(void 0!==a&&""!==a&&(i+="eventtype="+encodeURIComponent(a)+"&"),void 0!==n.href&&(s=(l=n.hostname||(s=n.href,(l=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)").exec(s))?l[1]:s)).toLowerCase(),s=n.href.replace(l,s),s=(s=unescape(s)).replace(/#.*$/,""),s=encodeURIComponent(st.encode(s)),i+="href="+s+"&"),void 0!==n.id&&""!==n.id&&(i+="htmlid="+encodeURIComponent(n.id)+"&"),void 0!==n.className&&""!==n.className&&(i+="htmlclasses="+encodeURIComponent(n.className)+"&"),void 0!==e&&"undefined"!==e.id?(i+="formid="+encodeURIComponent(e.id)+"&",e.id&&-1<V.indexOf(e.id)&&((u=p(e))&&(i+="inputs="+encodeURIComponent(JSON.stringify(u))+"&")),void 0!==e.attributes&&(u=y(e),i+="attributes="+encodeURIComponent(JSON.stringify(u))+"&")):void 0!==n.attributes&&("div"===a&&c?i+="attributes="+encodeURIComponent(JSON.stringify(c))+"&":(c=y(n),i+="attributes="+encodeURIComponent(JSON.stringify(c))+"&")),i=i.replace(/&$/,""),null===$&&null===X?mt(_(),"event",i,function(t,e){g("trackEvents",t,{id:n.id,classname:n.className,queryparams:i,response:e+" on element: "+n})}):null!==(d=I())&&"string"==typeof d?mt(d,"eventp",i,function(t,e){g("trackEvents",t,{id:n.id,classname:n.className,queryparams:i,response:e+" on element: "+n+" on page with pid: "+d})}):null!==X&&"string"==typeof X?mt(X,"eventp",i,function(t,e){g("trackEvents",t,{id:n.id,classname:n.className,queryparams:i,response:e+" on element: "+n+" on page with pid: "+X})}):g("trackEvents",!0,"Click on response - page not tracked, pid not found on page")):g("trackEvents",!0,"No information to record.")}function C(n,o,i){x(z.getElementById(n),"load",function(t){var e={iframeid:n,response:"Iframe "+n+" is loaded"};"object"==typeof i&&(e.url=i.url,e.pid=i.pid),o(!0,e)})}function s(t,e,n,o,i){var r,a,s,l=_();switch("number"==typeof e&&(e+=""),e){case"cart":case"5":case"7":r="cevent",a="target="+t+"&value=100",s=l;break;case"visit":case"2":default:r="vp",a="","string"==typeof o&&(r="i"+r,a="sid="+o,"string"==typeof i&&(a+="&tpid="+i)),s=t}mt(s,r,a,n)}function g(t,e,n){var o;"string"==typeof t&&("object"==typeof n&&null!==n?(o=n).status=e:((o={}).status=e,o.response=n),n=new Date,o.timestamp=n.getSeconds()+"."+n.getMilliseconds(),void 0===i[t]&&(i[t]=[]),i[t].push(o))}function v(){var t="right";return"lr"===nt?t="left":"bt"===nt&&(t="bottom"),t}function b(e,t){var n,o,i=v(),r=parseInt((n=e,o=i,"getComputedStyle"in window?window.getComputedStyle(n,null).getPropertyValue(o):n.currentStyle[o]),10),a=r-t,s=1,l=10,u=16;!function t(){l<=s||(s+=1,e.style[i]=(r-a*s/l).toFixed(0)+"px",setTimeout(t,u))}()}function w(){var t=z.getElementById(M);t&&(b(t.parentNode,-ot),setTimeout(function(){b(z.getElementById(F),0)},100))}function N(t){var e;b(z.getElementById(F),-50),"postMessage"in window&&void 0!==(e=z.getElementById(M))&&"string"==typeof t&&(t="openTab,"+t,e.contentWindow.postMessage(t,"*")),b(e=z.getElementById(M).parentNode,0)}function k(t){var e,n=null,o=z.getElementById(j);if(o&&0<(e=o.getElementsByTagName("iframe")).length&&(n=e[0]),null===n||n.contentWindow!==t.source){n=null;for(var i=ft(j),r=0;r<i.length;r+=1)if(o=i[r],e=o.getElementsByTagName("iframe"),0<e.length&&e[0].contentWindow===t.source){n=e[0];break}}return{iframe:n,parent:o}}function E(){var t,e=[],n=z.getElementById(j);n&&0<(t=n.getElementsByTagName("iframe")).length&&e.push({iframe:t[0],parent:n});for(var o=ft(j),i=0;i<o.length;i+=1)0<(t=(n=o[i]).getElementsByTagName("iframe")).length&&e.push({iframe:t[0],parent:n});return e}function B(){return[z.getElementById(M),z.getElementById(F)]}function T(t){console.log("Received data: ",t)}function A(t){var e,n=null!==z.getElementById("th-lightbox");if(t.origin===P){if("object"==typeof t.data)e=t.data;else if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){console.warn("TH - Error: could not parse iframe message")}else console.warn("TH - could not read data from message: "+t.data);if(void 0!==e){var o=e.msg;if("thWidgetResize"===o){var i=parseInt(e.width),r=parseInt(e.height),a=k(t),s=a.iframe,l=a.parent;if(null!==s&&null!==l){var u={};try{l&&l.parentNode&&(u=l.parentNode.getBoundingClientRect())}catch(t){console.log("Cortex: warning: cannot calculate exact pixel width")}!isNaN(i)&&0<i?D=i+"px":!isNaN(i)&&i<0&&(D="100%","object"==typeof u&&null!==u&&"number"==typeof u.width&&0<u.width&&(D=Math.floor(u.width)+"px")),!isNaN(r)&&0<r?q=r+"px":!isNaN(r)&&r<0&&(q="100%"),null!=s&&(s.width=D,s.height=q),null!=l&&(l.style.width=D,l.style.height=q)}}else if("splash"!==o||n){if("thData"===o)T(e.data,k(t));else if("thCloseSplash"===o&&n)z.getElementById("th-lightbox").remove();else if("reload"===o){for(var d,c,p=E(),g=B(),f=0;f<p.length;f+=1)d=(c=p[f]).iframe,null!=(c=c.parent)&&(c.style.width=0,c.style.height=0),null!=d&&(d.width=0,d.height=0,d.src=d.src);for(et=!0,f=0;f<g.length;f+=1)void 0!==g[f]&&null!==g[f]&&(g[f].src=g[f].src)}}else!function(t){var e=z.createElement("div");e.setAttribute("id","th-lightbox"),e.setAttribute("style","position:fixed!important;top:0!important;left:0!important;width:100%!important;height:100%!important;background:rgba(0, 0, 0, .8)!important;z-index: 99990;!important"),e.setAttribute("onclick",'Cortex.hideSmartMenu();document.getElementById("th-lightbox").remove();'),z.body.appendChild(e);var n=Math.max(z.body.offsetWidth,z.documentElement.clientWidth,z.documentElement.offsetWidth),o=n<=384?"95%":384<n&&n<=768?"80%":"50%";(n=z.createElement("div")).setAttribute("id","th-lightbox-container"),n.setAttribute("style","border-top-left-radius: 6px;border-top-right-radius: 6px;border-bottom-right-radius: 6px;border-bottom-left-radius: 6px;text-align: left;direction: ltr;width: "+o+";height: 75%;position: relative;top: 10%;margin-left: auto;margin-right:auto;padding:16px;background-color: rgb(255, 255, 255);"),n.innerHTML=t,e.appendChild(n)}((o=_(),'<iframe src="'+gt(P,"api",U,"info",o)+'" width="100%" height="100%" id="th-lightbox-iframe" frameborder="0" marginwidth="0" marginheight="0" seamless></iframe>'))}}}function l(l){var u,d=_(),c=[],t=z.getElementById(j);t&&tt.indexOf("_")<0&&((u={}).obj=t,u.widgetid="_",c.push(u),tt.push("_"));for(var p,g,f,h,m,y,v,b,e=ft(j),w=0;w<e.length;w+=1)t=e[w],p=t.getAttribute("data-widgetid"),g=t.getAttribute("data-content"),f=t.getAttribute("data-lang"),h=t.getAttribute("data-loc"),m=t.getAttribute("data-buttonid"),y=t.getAttribute("data-size"),v=t.getAttribute("data-color"),b=t.getAttribute("data-pid"),null!=p&&tt.indexOf(p)<0?((u={}).obj=t,u.widgetid=p,null!=f&&(u.widgetlang=f),null!=h&&(u.widgetloc=h),null!=g&&(u.widgetcontent=""!==g?g:"undefined"),null!==u&&(c.push(u),tt.push(p))):null!=m&&tt.indexOf(m)<0&&((u={}).obj=t,u.buttonid=m,null!=y&&(u.buttonsize=y),null!=v&&(u.buttoncolor=v),null!=b&&(u.buttonpid=b),null!=f&&(u.widgetlang=f),null!=h&&(u.widgetloc=h),c.push(u),tt.push(m));0===c.length?l(!1,"Error: new thRecommendations div(s) not present in the html page"):ht(function(t,e){var n,o,i;for(w=0;w<c.length;w+=1){u=c[w].obj,p=c[w].widgetid,g=c[w].widgetcontent,f=c[w].widgetlang,h=c[w].widgetloc,m=c[w].buttonid,y=c[w].buttonsize,v=c[w].buttoncolor,b=c[w].buttonpid;var r,a,s={};s.url=S(),null!=p?(r=p,n="?widgetid="+encodeURIComponent(p),null!=g&&(n+="&widgetcontent="+encodeURIComponent(g)),null!=f&&(n+="&lang="+encodeURIComponent(f)),null!=h&&(n+="&loc="+encodeURIComponent(h)),W?n+="&anon=1":null!==e&&(n+="&"+H+"="+encodeURIComponent(e)),o=gt(P,"api",U,"r",d,n),null!==$&&(a=I(),null!==(s.pid=a)&&"string"==typeof a&&(o=gt(P,"api",U,"rp",a,d,n))),"string"==typeof X&&(a=X,s.pid=a,o=gt(P,"api",U,"rp",a,d,n))):null!=m&&(r=m,n="?buttonid="+encodeURIComponent(m),null!=y&&(n+="&size="+encodeURIComponent(y)),null!=v&&(n+="&color="+encodeURIComponent(v)),null!=f&&(n+="&lang="+encodeURIComponent(f)),null!=h&&(n+="&loc="+encodeURIComponent(h)),W?n+="&anon=1":null!==e&&(n+="&"+H+"="+encodeURIComponent(e)),null!==$&&null!==(a=I())&&"string"==typeof a&&(s.pid=a),"string"==typeof X&&(a=X,s.pid=a,o=gt(P,"api",U,"rp",a,d,n)),null!=b&&(s.pid=b),"string"==typeof s.pid&&(n+="&pid="+encodeURIComponent(s.pid)),o=gt(P,"api",U,"b",d,n)),i='<iframe src="'+o+'" width='+(D||'"0px"')+" height="+(q||'"0px"')+' id="'+L+r+'" frameBorder="0" marginwidth="0" marginheight="0" allowTransparency="true" scrolling="no" seamless></iframe>',u.style.width=0,u.style.height=0,u.innerHTML=i,x(J,"message",A),"postMessage"in window||lt.bind("thWidgetResize",A,P),C(L+r,l,s)}})}function u(t){if(t.origin===P){var e;try{e=JSON.parse(t.data)}catch(t){console.log("TH - Error: could not read SmartMenu iframe size")}if(void 0!==e){var n=e.msg;if("thToggleSmartMenu"===n){var o,i,r,a,s,l=parseInt(e.action),u=e.tab;0===l?(w(),it=0):1===l?(a="?force=true",u&&(a+="&tab="+u),o=z.getElementById(M),r=_(),i=gt(P,"api",U,"m","menu",r,a),o&&o.parentNode||((r=z.createElement("div")).style.cssText="margin:0;padding:0;border:0;z-index:99999;background-color:#FFFFFF;position:fixed;height:100%;top:0;",a=v(),s=parseInt(e.width),d=parseInt(e.height),isNaN(s)?(r.style.width=ot+"px",r.style.left=-ot+"px"):"%"===e.width[e.width.length-1]?r.style.width=e.width:(r.style.width=s+"px",r.style[a]=-s+"px",ot=s),isNaN(d)?r.style.height="100%":"%"===e.height[e.height.length-1]?r.style.height=e.height:r.style.height=d+"px",z.body.appendChild(r),(o=z.createElement("iframe")).setAttribute("id",M),o.setAttribute("src",i),o.setAttribute("frameBorder","0"),o.setAttribute("border","0"),o.setAttribute("allowTransparency","true"),o.style.border="0",o.style.margin="0",o.style.padding="0",o.style.zIndex="99999",o.height="100%",o.width="100%",o.style.top="0",r.appendChild(o)),N(u),it=1):2===l&&(b(z.getElementById(M).parentNode,0),it=2)}else if("thGoBack"===n)1===it?(w(),it=0):2===it&&(N(),it=1);else if("resizeSMBtn"===n){var d,c,l=z.getElementById(F);null!=l&&(l.style.position="fixed",l.style.border="0",l.style.padding="0",l.style.zIndex="999999",l.style.top="50%",l.style.right="0px",s=parseInt(e.width),d=parseInt(e.height),!isNaN(s)&&0<s&&(l.width=s+"px",l.style.marginTop=-Math.round(d/2)+"px"),!isNaN(d)&&0<d&&(l.height=d+"px"),"lr"!==e.translation&&"rl"!==e.translation&&"bt"!==e.translation||(nt=e.translation),d=parseInt(e.top),isNaN(d)?l.style.top="auto":"%"===e.top[e.top.length-1]?l.style.top=e.top:l.style.top=d+"px",d=parseInt(e.bottom),isNaN(d)?l.style.bottom="auto":"%"===e.bottom[e.bottom.length-1]?l.style.bottom=e.bottom:l.style.bottom=d+"px",d=parseInt(e.left),isNaN(d)?l.style.left="auto":"%"===e.left[e.left.length-1]?l.style.left=e.left:(c="lr"===nt?d-s:d,l.style.left=c+"px"),d=parseInt(e.right),isNaN(d)?l.style.right="auto":"%"===e.right[e.right.length-1]?l.style.right=e.right:(c="rl"===nt?d-s:d,l.style.right=c+"px"),"true"===e.menuOpened||!0===e.menuOpened||et||(et=!1,c=e.delay,setTimeout(function(){0===it&&b(z.getElementById(F),0)},c||1e3)))}else if("thReloadSmartMenu"===n){var p,g=B(),f=E();for(et=!0,p=0;p<g.length;p+=1)void 0!==g[p]&&null!==g[p]&&(g[p].src=g[p].src);for(p=0;p<f.length;p+=1)"object"==typeof f[p]&&null!==f[p]&&f[p].iframe&&(f[p].iframe.src=f[p].iframe.src)}}}}return{setId:function(t){g("setId",!0,"SiteId set to: "+(U=t))},setThUrl:function(t){g("setThUrl",!0,"API URL set to: "+(P=t?t.replace(/\/$/,""):("https:"===n()?"https://":"http://")+"offer.slgnt.eu"))},includeFormInput:function(t){t&&(V=t)},setReceiveDataFunction:function(t){"function"==typeof t?(T=t,g("setReceiveDataFunction",!0,"Custom Action set successfully")):g("setReceiveDataFunction",!0,"Error: argument provided is not a function")},setPidDetector:function(t,e){t&&e?(($={}).id=t,$.parameterName=e,g("setPidDetector",!0,"pid detector set to: {id: "+P+", parameterName: "+e+"}")):g("setPidDetector",!0,"Error: id and parameterName need to be set.")},setContextProductId:function(t){g("setContextProductId",!0,"Product ID set to: "+(X=t))},setPid:function(t){g("setContextProductId",!0,"Product ID set to: "+(X=t))},setRootPid:function(t){g("setContextProductId",!0,"Product ID set to: "+(X=t))},displayWidget:function(){g("displayWidget",!1,"iframe not loaded yet"),l(function(t,e){g("displayWidget",t,e)})},detectChanges:function(){var t,e,n,o;g("detectChanges",!1,"detection loop started"),t=function(t,e){g("detectChanges",t,e)},e=(new Date).getTime(),n=tt.length,o=setInterval(function(){8e3<(new Date).getTime()-e?(t(!0,{response:rt+" loop ended after 8000ms",widgetids:tt}),clearInterval(o)):l(function(t,e){"object"==typeof e&&null!==e&&g("displayWidget",!0,e),n!==tt.length&&(g("detectChanges",!1,{response:"Looping again",widgetids:tt}),n=tt.length)})},100)},displaySmartMenu:function(t,n){g("displaySmartMenu",!1,"iframe not loaded yet"),"boolean"!=typeof t&&(t=!1),function(t,e){var n=z.getElementById(F);n&&n.parentNode&&n.parentNode.removeChild(n);var o=_(),o=gt(P,"api",U,"m","btn",o);(n=z.createElement("iframe")).setAttribute("id",F),n.setAttribute("src",o+(!0===t?"?force=true":"")),n.setAttribute("width","0px"),n.setAttribute("height","0px"),n.setAttribute("frameBorder","0"),n.setAttribute("border","0"),n.setAttribute("allowTransparency","true"),n.setAttribute("class","nav-toggler toggle-push-right rotate"),z.body.appendChild(n),x(J,"message",u),C(F,e||function(){})}(t,function(t,e){g("displaySmartMenu",t,e),"function"==typeof n&&n()})},blockFurtherActions:function(){at=!0},hideSmartMenu:function(){g("hideSmartMenu",!1,"iframe not loaded yet"),w()},setConsentless:function(t){g("setConsentless",!1,"Setting isConsentless to: "+(W="true"===t||!0===t))},trackPageView:function(t,e){var n,o,i;g("trackPageView",!1,"Launching tracking"),o=function(t,e){g("trackPageView",t,e)},t={customUserId:(n={customUserId:t,tpId:e}).customUserId||null,tpId:n.tpId||null},null===$&&null===X?(e=_())&&(n="v",i={},"string"==typeof t.customUserId&&(n="i"+n,i.sid=t.customUserId,"string"==typeof t.tpId&&(i.tpid=t.tpId)),mt(e,n,ut(i),o)):null!==(i=I())&&"string"==typeof i?s(i,2,o,t.customUserId,t.tpId):"string"==typeof X?s(X,2,o,t.customUserId,t.tpId):o("Warning: page not tracked, pid not found",null)},trackEvents:function(){var n;g("trackEvents",!1,"loading handlers"),n=t,"complete"===z.readyState||"loaded"===z.readyState||"interactive"===z.readyState?n():z.addEventListener?z.addEventListener("DOMContentLoaded",function t(){z.removeEventListener("DOMContentLoaded",t,!1),n()}):z.attachEvent&&(z.attachEvent("onreadystatechange",function t(){"complete"===z.readyState&&(z.detachEvent("onreadystatechange",t),n())}),z.documentElement.doScroll&&window===J.top&&function e(){if(!hasLoaded){try{z.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}n()}}())},trackProductVisit:function(t,e){s(t,"visit",e)},trackProductAction:function(t,e,n){g("trackProductAction",!1,"initializing."),"string"==typeof e&&""!==e&&void 0!==t?yt(t,e,0,function(t,e){g("trackProductAction",!0,e),"function"==typeof n&&n(t,e)}):g("trackProductAction",!0,"Did not do anything: wrong parameters.")},trackProductPurchases:function(t,n){g("trackProductPurchase",!1,"initializing."),dt(t)||"string"==typeof t&&0<t.length&&(t=[t]),dt(t)?yt(t,"purchase",0,function(t,e){g("trackProductPurchase",!0,e),"function"==typeof n&&n(t,e)}):g("trackProductPurchase",!0,"pids has to be a single product id or a non-empty array of product ids")},getUID:function(t){var n;n=t,ht(function(t,e){n(e)})},getItems:function(t,e){var n,o,i;o=e,"object"==typeof(n=t)&&null!==n?(e="",t=null,"string"==typeof n.contextPid&&(t=n.contextPid),"string"==typeof X&&(t=X),"number"!=typeof n.limit&&"string"!=typeof n.limit||(e+="limit="+n.limit),void 0!==n.pscore&&null!==n.pscore&&(e+="&pscore="+n.pscore),dt(n.filters)&&(encodeURIComponent(JSON.stringify(n.filters)),e+="&filters="+n.filters),"string"==typeof n.type&&(i=-1,"cart"===n.type?i=5:"visit"===n.type?i=2:"follow"===n.type?i=0:"purchase"===n.type&&(i=12),0<[0,1,2,3,4,5,6,7,8,9,12].indexOf(i)&&(e+="&type="+i)),i="rj","similar"===n.algo?i="similaritemsj":"popular"===n.algo?i="pj":"trending"===n.algo?i="trending":"visited"===n.algo?i="hj":"random"===n.algo&&(i="ij"),mt(t,i,e,function(t,e){t?(e=ct(e),o(null,e)):o(!1,[])})):o(!1,[])},getItemsForSmartBlock:function(t,n){var e="";"string"==typeof t.contextPid&&""!==t.contextPid&&(e+="pid="+t.contextPid),"string"==typeof X&&(e+="pid="+X),"string"==typeof t.contextUid&&""!==t.contextUid&&(0<e.length&&(e+="&"),e+="uid="+t.contextUid),"string"==typeof t.fallbackAlgo&&""!==t.fallbackAlgo&&(0<e.length&&(e+="&"),e+="fallbackalgo="+t.fallbackAlgo),"number"!=typeof t.limit&&"string"!=typeof t.limit||(0<e.length&&(e+="&"),e+="limit="+t.limit),void 0!==t.pscore&&null!==t.pscore&&(0<e.length&&(e+="&"),e+="pscore="+t.pscore),mt(_(),gt("v1",t.widgetId,"r"),e,function(t,e){t?(e=ct(e),n(null,e)):(console.log("Could not getItemsForSmartBlock"),n(null,[]))})},resortItems:function(t,e,n,o){var i="";"string"!=typeof t&&(t="_"),i+="string"!=typeof e?"resort=foruser":"resort="+e,e=_(),t=gt("v1",t,"r"),dt(n)?mt(e,t,i+="&itemarray="+encodeURIComponent(JSON.stringify(n)),function(t,e){t&&(e=ct(e),o(null,e))}):o(null,[])},getTracker:function(){return d},getConfig:function(){return{siteId:U,url:S(),apiBaseURL:P,pidDetector:$,contextProductId:X}},getLastActions:function(){return i},setDocumentLocation:function(t,e){S=t,n=e}}},location.href;for(var i=!1,r=0;r<_thq.length;r++)"setRootPid"===(n=_thq[r][0])&&(i=!0,e(_thq[r]),_thq.splice(r,1));if(!i)for(r=0;r<_thq.length;r++)"setContextProductId"!==(n=_thq[r][0])&&"setPid"!==n||(e(_thq[r]),_thq.splice(r,1));for(r=0;r<_thq.length;r++)"setId"===(n=_thq[r][0])&&(e(_thq[r]),_thq.splice(r,1));for(r=0;r<_thq.length;r++)"setThUrl"===(n=_thq[r][0])&&(e(_thq[r]),_thq.splice(r,1));for(r=0;r<_thq.length;r++)"setPidDetector"===(n=_thq[r][0])&&(e(_thq[r]),_thq.splice(r,1));for(r=0;r<_thq.length;r++)"includeFormInput"===(n=_thq[r][0])&&(e(_thq[r]),_thq.splice(r,1));for(P||d.setThUrl(),r=0;r<_thq.length;r++)_thq[r]&&e(_thq[r]);return _thq=new function(){return{push:e}},d}(),TasteHit=Cortex);